(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=o(t);fetch(t.href,i)}})();const v="https://cataas.com",D=15,I="counted",S=[{name:"Whiskers",fact:"Loves chasing laser pointers.",personality:"Playful"},{name:"Mittens",fact:"Sleeps 16 hours a day.",personality:"Chill"},{name:"Tiger",fact:"Enjoys climbing curtains.",personality:"Adventurous"},{name:"Shadow",fact:"Hides in boxes.",personality:"Curious"},{name:"Luna",fact:"Purrs loudly when happy.",personality:"Affectionate"}],l=document.getElementById("stack"),b=document.getElementById("summary"),F=document.getElementById("like-count"),$=document.getElementById("liked-grid"),x=document.getElementById("progress-bar"),R=document.getElementById("btn-restart"),L=new Audio(new URL("/pawmatch_web/meow.mp3",import.meta.url).toString());let f=[],h=[],c=0,m=0,C=!1;async function U(e=5e3){const s=new AbortController,o=setTimeout(()=>s.abort(),e);try{const n=await fetch(`${v}/cat?json=true`,{headers:{accept:"application/json"},cache:"no-cache",signal:s.signal});if(clearTimeout(o),!n.ok)throw new Error("CATAAS request failed");const t=await n.json();return{id:t.id,url:`${v}/cat/${t.id}`,tags:t.tags??[]}}catch(n){throw clearTimeout(o),n instanceof Error&&n.name==="AbortError"?new Error("Request timed out"):n}}async function P(e=D){const s=document.getElementById("loading-screen");s.style.display="flex";let o=s.querySelector(".loading-text");o||(o=document.createElement("div"),o.className="loading-text",o.style.marginTop="1rem",o.style.fontSize="1.2rem",o.style.color="#666",s.appendChild(o)),C=!1,b.hidden=!0,l.style.display="none",f=[],h=[],c=0,k(0);for(let n=0;n<e;n++){o.textContent=`Loading cats... ${n+1}/${e}`;try{f.push(await U()),await H(120)}catch(t){console.warn(`Failed to fetch cat ${n+1}:`,t),f.push({id:`${Date.now()}_${n}`,url:`${v}/cat`,tags:[]})}}o.textContent="Preparing your cats...",m=f.length,c=0,await Promise.all(f.map(n=>new Promise(t=>{const i=new Image;i.src=`${n.url}?width=900&height=1200`;const r=setTimeout(()=>{console.warn(`Image timeout for ${n.url}`),t()},3e3);i.onload=()=>{clearTimeout(r),t()},i.onerror=()=>{clearTimeout(r),console.warn(`Failed to load image for ${n.url}`),t()}}))),document.getElementById("loading-screen").style.display="none",l.style.display="",z()}function z(){l.innerHTML="",f.forEach((e,s)=>{const o=document.createElement("div");o.className="card",o.style.zIndex=String(s),o.dataset.url=e.url;const n=document.createElement("div");n.className="card-tagline";const t=document.createElement("img");t.src=new URL("/pawmatch_web/assets/paw-kXPXBpnk.png",import.meta.url).toString(),t.alt="Paw",t.className="paw-icon";const i=document.createElement("strong");i.textContent="Find Your Purrfect Match",n.append(t,i),o.appendChild(n);const r=document.createElement("div");r.className="card-img-area";const u=document.createElement("img");u.className="card-img",u.alt="Cat",u.src=`${e.url}?width=900&height=1200`,r.appendChild(u),o.appendChild(r);const g=S[Math.floor(Math.random()*S.length)],p=document.createElement("div");p.className="cat-profile",p.innerHTML=`
      <div><strong>Name:</strong> ${g.name}</div>
      <div><strong>Personality:</strong> ${g.personality}</div>
      <div><em>${g.fact}</em></div>
    `,o.appendChild(p);const y=document.createElement("div");y.className="card-actions";const a=document.createElement("button");a.className="btn btn-ghost";const d=document.createElement("img");d.className="btn-icon",d.alt="Dislike",d.src=new URL("/pawmatch_web/assets/dislike-CAnrcyrz.png",import.meta.url).toString(),a.appendChild(d);const w=document.createElement("button");w.className="btn btn-primary";const E=document.createElement("img");E.className="btn-icon",E.alt="Like",E.src=new URL("/pawmatch_web/assets/like-BNefzTqs.png",import.meta.url).toString(),w.appendChild(E),[w,a].forEach(B=>{["pointerdown","pointerup","pointermove"].forEach(O=>B.addEventListener(O,_=>_.stopPropagation()))}),a.addEventListener("click",()=>A(!1)),w.addEventListener("click",()=>A(!0)),y.append(a,w),o.appendChild(y),q(o),l.appendChild(o)})}function q(e){let s=0,o=0,n=0,t=0,i=!1;const r=a=>a?.closest?.(".card-actions")!=null,u=a=>{r(a.target)||(i=!0,e.setPointerCapture(a.pointerId),s=a.clientX,o=a.clientY,e.classList.add("moving"),e.classList.remove("like","pass"))},g=a=>{i&&(n=a.clientX-s,t=a.clientY-o,e.style.transform=`translate(${n}px, ${t}px) rotate(${n/18}deg)`,e.style.boxShadow=`0 26px 60px rgba(0,0,0,${Math.min(.55,Math.abs(n)/280)})`,n>20?e.classList.add("like"):e.classList.remove("like"),n<-20?e.classList.add("pass"):e.classList.remove("pass"))},p=a=>{e.classList.remove("moving");const d=e.dataset.url;a&&d&&h.push(d),a&&(L.currentTime=0,L.play().catch(()=>{}),M()),e.remove(),(l.children.length===0||c>=m)&&N()},y=()=>{if(!i)return;i=!1;const a=120;n>a?(T(e),e.classList.add("swipe-right"),e.addEventListener("transitionend",()=>p(!0),{once:!0})):n<-a?(T(e),e.classList.add("swipe-left"),e.addEventListener("transitionend",()=>p(!1),{once:!0})):(e.style.transform="",e.style.boxShadow="",e.classList.remove("like","pass","moving")),n=t=0};e.addEventListener("pointerdown",u),e.addEventListener("pointermove",g),e.addEventListener("pointerup",y)}function T(e){e&&e.dataset[I]==="1"||(e&&(e.dataset[I]="1"),c=Math.min(c+1,m),k(m?c/m*100:0))}function A(e){const s=l.lastElementChild;if(!s)return;const o=s.dataset.url||null;T(s),requestAnimationFrame(()=>{e&&(L.currentTime=0,L.play().catch(()=>{}),M()),s.classList.add(e?"swipe-right":"swipe-left"),s.addEventListener("transitionend",()=>{e&&o&&h.push(o),s.remove(),(l.children.length===0||c>=m)&&N()},{once:!0}),setTimeout(()=>{document.body.contains(s)&&(e&&o&&h.push(o),s.remove(),(l.children.length===0||c>=m)&&N())},350)})}function M(){const e=document.createElement("div");e.className="confetti",e.innerHTML="ðŸŽ‰",e.style.position="fixed",e.style.left="50%",e.style.top="55%",e.style.fontSize="5rem",e.style.transform="translate(-50%, -50%)",e.style.pointerEvents="none",e.style.zIndex="9999",document.body.appendChild(e),setTimeout(()=>e.remove(),1200)}function N(){C||(C=!0,F.textContent=String(h.length),$.innerHTML="",h.forEach(e=>{const s=document.createElement("img");s.src=`${e}?width=500&height=666`,s.alt="Liked cat",$.appendChild(s)}),l.style.display="none",b.hidden=!1,b.scrollIntoView({behavior:"smooth",block:"start"}))}function k(e){x&&(x.style.width=`${Math.max(0,Math.min(100,e))}%`)}const H=e=>new Promise(s=>setTimeout(s,e));R?.addEventListener("click",()=>P());P().catch(console.error);
